{% extends "base.html" %}

{% load i18n %}
{% load staticfiles %}

{% block title %}
BuyAware - Product Details
{% endblock %}

{% block styling %}
<link rel="stylesheet" type="text/css" href={% static "db/css/db_assessments_detail.css" %}>
{% endblock %}


{% block content %}

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/{% trans "en_EN" %}/sdk.js#xfbml=1&version=v2.8";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<header class="other">
</header>

<section class="success">
    <div class="container  ">
        <div class="row row-eq-height box ">
          {% with object.globalproductrating as rating %}
            <div class="col-md-4 product-detail-chart">
                <canvas id="{{object.name}}" width="300" height="300" CE="{{rating.CE}}" EC="{{rating.EC}}" WR="{{rating.WR}}" CM="{{rating.CM}}" TR="{{rating.TR}}" PR="{{rating.PR}}"></canvas>
            </div>
        <div class="col-md-8 product-details">
        <div class="product-name">
        <h3>{{object.name}}</h3>
        </div>
        <div class="product-assessments">
        <div class="tabs-left">
        <ul class="nav nav-tabs">
          <li class="active"><a href="#a" data-toggle="tab"><span class="glyphicon glyphicon-stats"></span></a></li>
          <li><a href="#b" data-toggle="tab"><span class="glyphicon glyphicon-leaf"></span></a></li>
          <li><a href="#c" data-toggle="tab"><span class="glyphicon glyphicon-globe"></span></a></li>
          <li><a href="#d" data-toggle="tab"><span class="glyphicon glyphicon-user"></span></a></li>
            <li><a href="#e" data-toggle="tab"><span class="glyphicon glyphicon-fire"></span></a></li>
          <li><a href="#f" data-toggle="tab"><span class="glyphicon glyphicon-eye-open"></span></a></li>
          <li><a href="#g" data-toggle="tab"><span class="glyphicon glyphicon-wrench"></span></a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="a">
            <h3>Overall rating &nbsp; &nbsp;<span id="overall" class="label label-default pull-right">{{rating.overall}}%</span></h3>
            <ul class="list-group pull-left">
              <li class="list-group-item">
                <h4>Climate/Energy &nbsp; &nbsp;<span class="label pull-right">{{rating.CE}}%</span></h4>
              </li>
              <li class="list-group-item">
                <h4>Ecology &nbsp; &nbsp;<span class="label pull-right">{{rating.EC}}%</span></h4>
              </li>
              <li class="list-group-item">
                <h4>Worker Rights &nbsp; &nbsp;<span class="label pull-right">{{rating.WR}}%</span></h4>
              </li>
              <li class="list-group-item">
                <h4>Conflict Minerals &nbsp; &nbsp;<span class="label pull-right">{{rating.CM}}%</span></h4>
              </li>
              <li class="list-group-item">
                <h4>Transparency &nbsp; &nbsp;<span class="label pull-right">{{rating.TR}}%</span></h4>
              </li>
              <li class="list-group-item">
                <h4>Performance &nbsp; &nbsp;<span class="label pull-right">{{rating.PR}}%</span></h4>
              </li>
            </ul>
            
          </div>

          {% endwith %}

          <div class="tab-pane" id="b">
              <h3>Climate/Energy</h3>
              <ul class="list-group pull-left">
              {% for crit in crits_CE %}
              <li class="list-group-item">
                <div class="row">
                  <div id="question" class="col-xs-8">
                    <p>{{ crit.criterion.question }}</p>
                  </div>
                  <div class="col-xs-4">
                    <h4><span class="label pull-right">{{ crit.answer }}</span></h4>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="tab-pane" id="c">
                <h3>Ecology</h3>
                <ul class="list-group pull-left">
              {% for crit in crits_EC %}
              <li class="list-group-item">
                <div class="row">
                  <div class="col-xs-8">
                    <p>{{ crit.criterion.question }}</p>
                  </div>
                  <div class="col-xs-4">
                    <h4><span class="label pull-right">{{ crit.answer }}</span></h4>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="tab-pane" id="d">
                <h3>Worker Rights</h3>
                <ul class="list-group pull-left">
              {% for crit in crits_WR %}
              <li class="list-group-item">
                <div class="row">
                  <div class="col-xs-8">
                    <p>{{ crit.criterion.question }}</p>
                  </div>
                  <div class="col-xs-4">
                    <h4><span class="label pull-right">{{ crit.answer }}</span></h4>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="tab-pane" id="e">
                <h3>Conflict Minerals</h3>
                <ul class="list-group pull-left">
              {% for crit in crits_CM %}
              <li class="list-group-item">
                <div class="row">
                  <div class="col-xs-8">
                    <p>{{ crit.criterion.question }}</p>
                  </div>
                  <div class="col-xs-4">
                    <h4><span class="label pull-right">{{ crit.answer }}</span></h4>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="tab-pane" id="f">
                <h3>Transparency</h3>
                <ul class="list-group pull-left">
              {% for crit in crits_TR %}
              <li class="list-group-item">
                <div class="row">
                  <div class="col-xs-8">
                    <p>{{ crit.criterion.question }}</p>
                  </div>
                  <div class="col-xs-4">
                    <h4><span class="label pull-right">{{ crit.answer }}</span></h4>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="tab-pane" id="g">
                <h3>Performance</h3>
                <ul class="list-group pull-left">
              {% for crit in crits_PR %}
              <li class="list-group-item">
                <div class="row">
                  <div class="col-xs-8">
                    <p>{{ crit.criterion.question }}</p>
                  </div>
                  <div class="col-xs-4">
                    <h4><span class="label pull-right">{{ crit.answer }}</span></h4>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div><!-- /tab-content -->
      </div><!-- /tabbable -->
    </div>

    <p class="product-description">
                    
    </p>

    <!-- product comparer !-->
    <div class="dropdown">
      <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
        Compare with other products
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu product-selector" aria-labelledby="dropdownMenu1">
      {% for product in products %}
        {% with product.globalproductrating as rating %}
        <li><a href="#" CE="{{rating.CE}}" EC="{{rating.EC}}" WR="{{rating.WR}}" CM="{{rating.CM}}" TR="{{rating.TR}}" PR="{{rating.PR}}">{{ product.name }}</a></li>
        {% endwith %}
      {% endfor %}
      </ul>
    </div>
    </div>
  </div>  <!-- row end of product description!-->

  <!-- comments !-->
  <div class="row comments">
    <div class="col-md-8 col-md-offset-4 box">
      <div class="fb-comments" data-href="http://buyaware.org" data-numposts="5" data-width="100%"></div>
    </div>
  </div> <!-- row end of comments >

  </div> <!-- container !-->
</section>
{% endblock %}

{% block scripts %}
<script src="{% static "js/Chart.js" %}"></script>
<script src="{% static "db/js/assessments_detail.js" %}"></script>
{% endblock %}